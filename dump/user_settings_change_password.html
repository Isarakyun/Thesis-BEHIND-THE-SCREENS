<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Account Settings</title>
    <link href="https://cdn.jsdelivr.net/npm/remixicon@4.2.0/fonts/remixicon.css" rel="stylesheet"/>
    <link href="../static/css/styles.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>

<body class="bg-slate-200 dark:bg-[#121212]">
    <div class="mt-4 ml-4 text-xl text-white dark:text-black">
        <a href="/settings" class="px-3 py-2 bg-blue-500 rounded-full"><i class="ri-arrow-left-line"></i></a>
    </div>
{% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
        {% for category, message in messages %}
        {% if category == 'error' %}
        <div id="alert-{{ loop.index }}" class="alert bg-red-500 text-black p-3 text-sm">
            {{ message }}
            <button type="button" class="float-right" data-dismiss="alert" onclick="this.parentElement.style.display='none'">&times;</button>
        </div>
        {% else %}
        <div id="alert-{{ loop.index }}" class="alert bg-blue-600 text-white p-3 text-sm">
            {{ message }}
            <button type="button" class="float-right" data-dismiss="alert" onclick="this.parentElement.style.display='none'">&times;</button>
        </div>
        {% endif %}
        {% endfor %}
    {% endif %}
{% endwith %}
<div class="flex justify-center items-center mt-20">
        <div class="w-full max-w-2xl mx-auto p-8 dark:bg-gray-800 bg-slate-200 rounded-lg shadow-md">
            <form method="POST">
    
            <div class="w-full">
                <h1 class="text-2xl font-bold mb-6 text-black dark:text-white">Change Password</h1>
                <!-- Password Change -->
                <div class="p-4 rounded-lg mb-6">
                    <div>
                        <label for="password" class="block mb-1 text-black dark:text-slate-400">Current Password</label>
                        <div class="mb-4 relative">
                            <input class=" w-full items-center justify-between p-2 rounded bg-gray-100 dark:bg-slate-300 text-gray-800"
                                    id="password"
                                    name="password"
                                    type="password">
                                    <i class="far fa-eye absolute right-3 top-3 cursor-pointer" id="toggle-password" onclick="togglePasswordVisibility()"></i>
                            <div class="mt-2 text-sm text-blue-500">
                                <a href="/forgot">Forgot Password?</a>
                            </div>
                        </div>
                    </div>
                    
                    <div>
                        <label for="newpassword" class="block mb-1 text-black dark:text-slate-400">New Password</label>
                        <div class="mb-4 relative">
                            <input class="flex w-full items-center justify-between p-2 rounded bg-gray-100 dark:bg-slate-300 text-gray-800"
                                    id="newpassword"
                                    name="newpassword"
                                    type="password">
                                    <i class="far fa-eye absolute right-3 top-3 cursor-pointer" id="toggle-newpassword" onclick="togglePasswordVisibility()"></i>
                        </div>
                    </div>
                    
                    <div>
                        <label for="confirmpassword" class="block mb-1 text-black dark:text-slate-400">Confirm Password</label>
                        <div class="mb-4 relative">
                            <input class="flex w-full items-center justify-between p-2 rounded bg-gray-100 dark:bg-slate-300 text-gray-800"
                                    id="confirmpassword"
                                    name="confirmpassword"
                                    type="password">
                                    <i class="far fa-eye absolute right-3 top-3 cursor-pointer" id="toggle-confirmpassword" onclick="togglePasswordVisibility()"></i>
                        </div>
                    </div>
                    <!-- Save Changes Button -->
                    <div class="w-full mt-6 rounded text-center text-black dark:text-white bg-blue-600">
                        <button type="submit" class="px-4 py-2 rounded-lg">Save Changes</button>
                    </div>
                </div>
            </div>
    
            </form>
        </div>
</div>

 
<script>
    function togglePasswordVisibility() {
        var passwordField = document.getElementById("password");
        var newPasswordField = document.getElementById("newpassword");
        var confirmPasswordField = document.getElementById("confirmpassword");
        var togglePasswordIcon = document.getElementById("toggle-password");
        var toggleNewPasswordIcon = document.getElementById("toggle-newpassword");
        var toggleConfirmPasswordIcon = document.getElementById("toggle-confirmpassword");
    
        if (passwordField.type === "password") {
            passwordField.type = "text";
            newPasswordField.type = "text";
            confirmPasswordField.type = "text";
            togglePasswordIcon.classList.remove("fa-eye");
            togglePasswordIcon.classList.add("fa-eye-slash");
            toggleNewPasswordIcon.classList.remove("fa-eye");
            toggleNewPasswordIcon.classList.add("fa-eye-slash");
            toggleConfirmPasswordIcon.classList.remove("fa-eye");
            toggleConfirmPasswordIcon.classList.add("fa-eye-slash");
        } else {
            passwordField.type = "password";
            newPasswordField.type = "password";
            confirmPasswordField.type = "password";
            togglePasswordIcon.classList.remove("fa-eye-slash");
            togglePasswordIcon.classList.add("fa-eye");
            toggleNewPasswordIcon.classList.remove("fa-eye-slash");
            toggleNewPasswordIcon.classList.add("fa-eye");
            toggleConfirmPasswordIcon.classList.remove("fa-eye-slash");
            toggleConfirmPasswordIcon.classList.add("fa-eye");
        }
    }
    
    document.addEventListener('DOMContentLoaded', (event) => {
        const alerts = document.querySelectorAll('.alert');
        alerts.forEach((alert, index) => {
            setTimeout(() => {
                alert.style.display = 'none';
            }, 5000); // 5000 milliseconds = 5 seconds
        });
    });
</script>

</body>
</html>
